This document is a how-to for installing a Fedora scripts.mit.edu server.

* Check out the scripts.mit.edu svn repository.

* cd to server/fedora in the svn repository.

* Run "make install-deps" to install various prereqs.

* Create a scripts-build account, and set up rpm to build in $HOME.
  Or you can just use the default setup, which will generate packages
  in /usr/src/redhat.

* Use the Makefile to build the scripts.mit.edu-specific Fedora
  packages.
  - make download
  - make setup
  - make all
  - openafs-devel is a build-dependency of accountadm, so you'll need to
    install it by hand.
  Then install all the packages as root.

* Run "make suexec" and "make suexec-install" to overwrite
  /usr/sbin/suexec with one that works. The one installed by the
  newly-built Apache RPM is misconfigured.

* Install the full list of RPMs that users expect to be on the
  scripts.mit.edu servers.  See server/doc/rpm and
  server/doc/rpm_snapshot.  (Note that this is only a snapshot, and not
  all packages may in fact be in use.)

* Install the full list of perl modules that users expect to be on the
  scripts.mit.edu servers.  See server/doc/perl and
  server/doc/perl_snapshot.

* Install rails (versions 1.1.6 and 1.2.2).

* Install the Python eggs and Ruby gems that are on the other scripts.mit.edu
  servers and do not have RPMs.

* Install the credentials (machine keytab, daemon.scripts keytab, SSL
  certs).

* Attempt to check out server/fedora/config/etc into /etc. This involves
  individually renaming directories out of the way, copying over any
  configuration files from SVN (and the .svn directory), and moving the
  original directory back.

  - Configure Apache.

  - Try not to misconfigure PAM or SSH in the process.

  - If you are setting up a test server, pay attention to
  /etc/sysconfig/network-scripts and do not bind scripts' IP address.
  You will also need to modify /etc/ldap.conf and
  /etc/httpd/conf.d/vhost_ldap.conf to use scripts.mit.edu instead of
  localhost.

* Install fedora-ds-base and set up replication (see /mit/scripts/doc).

* (Optional) Beat your head against a wall.

* I recommend setting noatime for the root filesystem in /etc/fstab.

* Possibly perform other steps that I've neglected to put in this
  document.
